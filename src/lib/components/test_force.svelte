<script>
import * as d3 from 'd3';
import { scaleBand, scaleLinear } from "d3-scale";
import { max, mean, rollups } from "d3-array";
import { forceSimulation, forceX, forceY, forceCollide, forceManyBody, forceCenter } from "d3-force";
import { fade } from "svelte/transition";
import { onMount } from 'svelte';

let width = window.innerWidth;
let height = window.innerHeight;


  let nodes = [];

  onMount(() => {
    // Create the star coordinates
    const starCoordinates = [
      [705.6, 404.8],
      [703, 409.1],
      [700.1, 413.1],
      [696.9, 417],
      [693.4, 420.5],
      [689.6, 423.8],
      [685.6, 426.8],
      [681.5, 427.2],
      [679.8, 422.5],
      [678.6, 417.6],
      [678.1, 412.7],
      [678.1, 407.7],
      [677.9, 402.7],
      [677.6, 397.7],
      [677.1, 392.7],
      [676.5, 387.7],
      [675.8, 382.8],
      [675, 377.9],
      [673.9, 373],
      [672.8, 368.1],
      [671.5, 363.3],
      [670, 358.5],
      [668.4, 353.8],
      [666.6, 349.1],
      [664.7, 344.5],
      [662.6, 339.9],
      [660.2, 335.5],
      [657.7, 331.2],
      [655, 327],
      [652.2, 322.9],
      [656.1, 322.5],
      [661.1, 322.4],
      [666, 322],
      [671, 321.6],
      [676, 321.6],
      [681, 322.3],
      [685.9, 321.7],
      [689, 318],
      [689.8, 313.1],
      [689.8, 308.1],
      [689.7, 303.1],
      [690.5, 298.2],
      [692.6, 293.6],
      [695.8, 289.8],
      [698.3, 285.5],
      [700.6, 281],
      [703.8, 277.2],
      [707.9, 274.3],
      [712, 271.5],
      [715.6, 268.1],
      [720.3, 267.5],
      [725.1, 268.6],
      [729.3, 267.4],
      [727.6, 262.9],
      [724.3, 259.1],
      [721, 255.4],
      [717.8, 251.5],
      [717.8, 246.8],
      [721.5, 243.5],
      [725.7, 240.7],
      [729.4, 237.4],
      [730.3, 232.8],
      [726.5, 229.7],
      [721.9, 227.8],
      [717.3, 225.7],
      [714.2, 222],
      [714.1, 217],
      [715.1, 212.1],
      [715.8, 207.2],
      [714.6, 202.4],
      [710.7, 199.5],
      [705.9, 198],
      [701.1, 196.7],
      [696.4, 194.9],
      [693.6, 190.9],
      [693.4, 185.9],
      [693.3, 180.9],
      [692.6, 176],
      [691, 171.3],
      [691.1, 166.3],
      [692.1, 161.4],
      [692.9, 156.5],
      [692.4, 151.6],
      [688.4, 148.9],
      [683.5, 148.9],
      [678.5, 149.4],
      [673.5, 150.2],
      [668.6, 150.7],
      [663.9, 149.3],
      [662.5, 144.6],
      [662.8, 139.6],
      [663.4, 134.7],
      [663.5, 129.7],
      [661.3, 125.2],
      [659.9, 120.5],
      [659.6, 115.5],
      [659, 110.5],
      [657.1, 105.9],
      [653.9, 102.1],
      [650.3, 98.6],
      [647, 94.9],
      [643.5, 91.3],
      [638.7, 90.4],
      [633.9, 91.7],
      [629.2, 93.4],
      [624.6, 95.2],
      [619.8, 96.7],
      [614.9, 96.4],
      [612.6, 92.1],
      [611.8, 87.2],
      [611.1, 82.2],
      [610.2, 77.3],
      [607.6, 73.1],
      [602.9, 71.6],
      [597.9, 71.5],
      [592.9, 71.6],
      [587.9, 71.3],
      [583.7, 68.8],
      [581.2, 64.5],
      [579.2, 59.9],
      [576.8, 55.5],
      [573.4, 51.8],
      [569.4, 48.9],
      [565.9, 45.3],
      [562.5, 41.7],
      [558.5, 38.7],
      [553.9, 36.7],
      [549.1, 35.3],
      [544.3, 33.9],
      [539.5, 32.4],
      [534.6, 31.7],
      [530.1, 33.8],
      [525.8, 36.3],
      [521.4, 38.8],
      [516.9, 40.9],
      [512.1, 40.5],
      [508.2, 37.4],
      [504.3, 34.2],
      [500.1, 31.5],
      [495.7, 29.2],
      [491.1, 27.1],
      [486.5, 25.1],
      [482, 23],
      [477.3, 21.2],
      [472.4, 21],
      [467.4, 21.5],
      [462.4, 22],
      [457.5, 21.6],
      [452.8, 19.7],
      [448.9, 16.7],
      [444.9, 13.7],
      [440.4, 11.5],
      [435.5, 12],
      [431.8, 15.2],
      [428.3, 18.8],
      [424.8, 22.4],
      [421, 25.6],
      [416.3, 25.9],
      [412.4, 22.8],
      [409.2, 19],
      [405.9, 15.1],
      [402.4, 11.6],
      [397.8, 10.1],
      [393.9, 12.9],
      [391.1, 17.1],
      [388.7, 21.5],
      [386.4, 25.9],
      [383.5, 30],
      [379.1, 31.8],
      [374.6, 29.6],
      [370.6, 26.6],
      [366.5, 23.7],
      [362, 21.6],
      [357.3, 22.5],
      [353.9, 26.2],
      [351.4, 30.5],
      [349.1, 35],
      [345.7, 38.6],
      [341.1, 40.4],
      [336.1, 40.5],
      [331.1, 40.4],
      [326.2, 40.9],
      [321.4, 42.2],
      [316.6, 43.8],
      [311.9, 45.4],
      [307.2, 47.1],
      [302.2, 47.2],
      [297.5, 45.4],
      [292.9, 43.4],
      [288.2, 41.7],
      [283.3, 41.8],
      [279.9, 45.3],
      [278.1, 49.9],
      [276.4, 54.7],
      [274.6, 59.3],
      [271.3, 63],
      [267.4, 66.1],
      [263.4, 69.2],
      [259.5, 72.3],
      [255.7, 75.5],
      [251.9, 78.7],
      [248.1, 82],
      [244.2, 85.2],
      [239.7, 87.1],
      [234.7, 87.1],
      [229.9, 85.9],
      [225, 84.8],
      [220, 84.6],
      [216.1, 87.5],
      [214.6, 92.2],
      [213.8, 97.2],
      [212.9, 102.1],
      [210.9, 106.6],
      [206.2, 107.7],
      [201.4, 106.5],
      [196.6, 105],
      [191.8, 103.5],
      [187.1, 101.9],
      [182.1, 101.6],
      [178, 104.2],
      [175.1, 108.3],
      [172.1, 112.3],
      [168.9, 116.2],
      [165.7, 120],
      [162.4, 123.7],
      [159, 127.5],
      [155.7, 131.2],
      [152.6, 135.1],
      [150.8, 139.7],
      [149.4, 144.5],
      [147.5, 149.1],
      [145, 153.5],
      [142.2, 157.6],
      [139.1, 161.5],
      [136, 165.5],
      [133.7, 169.9],
      [132.8, 174.8],
      [133.2, 179.8],
      [133.7, 184.7],
      [132.9, 189.6],
      [130.7, 194.1],
      [127.7, 198.1],
      [125, 202.3],
      [122.4, 206.6],
      [121.5, 211.4],
      [122.2, 216.4],
      [123.3, 221.3],
      [124, 226.2],
      [121.3, 230.1],
      [116.5, 231.5],
      [111.6, 232.1],
      [106.6, 232.5],
      [101.6, 233.1],
      [96.7, 234.2],
      [92.9, 237.1],
      [92.5, 242.1],
      [93.3, 247],
      [94.1, 252],
      [94.5, 256.9],
      [94.3, 261.9],
      [96.6, 266.3],
      [99.5, 270.4],
      [102.4, 274.5],
      [104.7, 278.9],
      [103.5, 283.5],
      [99.2, 285.9],
      [94.5, 287.7],
      [89.8, 289.4],
      [85.2, 291.4],
      [81.4, 294.5],
      [81, 299.3],
      [82.7, 304],
      [84.9, 308.5],
      [86.6, 313.2],
      [87.2, 318.2],
      [88, 323],
      [90.2, 327.5],
      [92.1, 332.1],
      [92.5, 337],
      [89.1, 340.6],
      [84.7, 342.9],
      [80.2, 345],
      [75.6, 347.1],
      [71.2, 349.4],
      [67.6, 352.8],
      [67.8, 357.6],
      [70.6, 361.8],
      [73.8, 365.6],
      [76.8, 369.6],
      [78.5, 374.2],
      [77.3, 379.1],
      [74.8, 383.4],
      [72.5, 387.8],
      [71.1, 392.6],
      [73.3, 397],
      [77.1, 400.2],
      [81.1, 403.2],
      [85, 406.3],
      [87.4, 410.6],
      [88.4, 415.5],
      [89.3, 420.5],
      [90.3, 425.4],
      [91.4, 430.2],
      [92.9, 435],
      [94.7, 439.7],
      [96.1, 444.5],
      [96.8, 449.4],
      [96.8, 454.4],
      [97.1, 459.4],
      [98.4, 464.2],
      [100.7, 468.6],
      [103.9, 472.5],
      [107, 476.3],
      [107.6, 481.1],
      [105, 485.4],
      [101.8, 489.2],
      [98.6, 493],
      [95.6, 497],
      [94.4, 501.8],
      [96.2, 506.4],
      [98.6, 510.8],
      [100.9, 515.2],
      [103.3, 519.6],
      [107.3, 522.5],
      [112, 524.2],
      [116.8, 525.5],
      [121.4, 527.6],
      [124.6, 531.3],
      [127.1, 535.7],
      [129.9, 539.8],
      [132.6, 544],
      [133.3, 548.9],
      [132, 553.7],
      [130.3, 558.4],
      [128.8, 563.2],
      [128.6, 568.2],
      [132, 571.6],
      [136.8, 572.9],
      [141.8, 573.5],
      [146.8, 574.1],
      [151.6, 575.3],
      [153.9, 579.3],
      [152.5, 584.1],
      [150.4, 588.7],
      [148.3, 593.2],
      [146.1, 597.7],
      [144.4, 602.4],
      [144.3, 607.3],
      [148.4, 609.6],
      [153.4, 609.6],
      [158.4, 608.8],
      [163.3, 608.1],
      [168.3, 607.6],
      [173.2, 608],
      [176.6, 611.5],
      [178.3, 616.2],
      [179.9, 620.9],
      [182, 625.5],
      [184.7, 629.6],
      [186.3, 634.3],
      [187.1, 639.3],
      [188.4, 644.1],
      [191.2, 648.2],
      [196, 649.1],
      [200.9, 648.2],
      [205.7, 646.9],
      [210.6, 645.6],
      [215.5, 645.2],
      [219.6, 647.6],
      [220.7, 652.4],
      [221.1, 657.4],
      [221.3, 662.4],
      [222.3, 667.3],
      [225.5, 671],
      [230.1, 672.8],
      [235, 674],
      [239.7, 675.6],
      [244.4, 677.5],
      [249, 679.4],
      [253.6, 681.4],
      [258.3, 683.1],
      [262.8, 685.1],
      [265.9, 689],
      [268.4, 693.3],
      [271.1, 697.5],
      [274.8, 700.9],
      [279.3, 703],
      [284.1, 704.3],
      [288.9, 705.6],
      [293.7, 707.1],
      [298.6, 707.6],
      [303.4, 706.3],
      [308.1, 704.6],
      [313, 703.3],
      [317.8, 704.1],
      [321.5, 707.4],
      [324.5, 711.5],
      [327.6, 715.3],
      [331.6, 718.3],
      [336.1, 720.5],
      [339.9, 723.8],
      [343.6, 727.1],
      [347.7, 729.9],
      [352.5, 730.2],
      [356.7, 727.5],
      [360.3, 724],
      [363.6, 720.3],
      [367.3, 716.9],
      [371.7, 714.6],
      [376.1, 716.4],
      [378.9, 720.5],
      [381.7, 724.7],
      [385.1, 728.3],
      [389.2, 731.1],
      [393.9, 732.8],
      [398.9, 733.4],
      [403.8, 733.6],
      [407.2, 736.3],
      [406.9, 741.3],
      [406.6, 746.3],
      [406.2, 751.3],
      [405.9, 756.3],
      [405.5, 761.3],
      [405.1, 766.3],
      [404.7, 771.2],
      [404.3, 776.2],
      [403.8, 781.2],
      [403.4, 786.2],
      [402.9, 791.2],
      [402.4, 796.1],
      [401.9, 801.1],
      [401.4, 806.1],
      [400.8, 811],
      [400.3, 816],
      [399.7, 821],
      [399, 825.9],
      [398.4, 830.9],
      [397.7, 835.9],
      [397, 840.8],
      [396.3, 845.8],
      [395.6, 850.7],
      [394.8, 855.6],
      [394.1, 860.6],
      [393.2, 865.5],
      [392.4, 870.4],
      [391.5, 875.4],
      [390.5, 880.3],
      [389.5, 885.2],
      [388.5, 890.1],
      [387.4, 894.9],
      [386.2, 899.8],
      [385, 904.6],
      [383.7, 909.5],
      [382.4, 914.3],
      [381, 919.1],
      [379.5, 923.9],
      [377.9, 928.6],
      [376.1, 933.3],
      [374.2, 937.9],
      [372.2, 942.5],
      [371, 947],
      [375.9, 947.5],
      [380.9, 947.7],
      [385.9, 948.2],
      [390.8, 948.9],
      [395.7, 949.8],
      [400.6, 951],
      [405.4, 952.3],
      [410.2, 953.7],
      [414.9, 955.3],
      [419.6, 957],
      [424.3, 958.8],
      [428.9, 960.7],
      [433.5, 962.6],
      [438.1, 964.7],
      [442.6, 966.8],
      [447.1, 969],
      [451.6, 971.3],
      [456, 973.6],
      [460.3, 976.1],
      [464.7, 978.5],
      [469, 981.1],
      [473.3, 983.6],
      [477.6, 986.2],
      [481.8, 988.9],
      [486, 991.6],
      [490.3, 994.2],
      [494.5, 996.9],
      [498.8, 999.4],
      [503.1, 1001.9],
      [507.5, 1004.4],
      [511.9, 1006.7],
      [516.3, 1009],
      [520.8, 1011.2],
      [525.4, 1013.4],
      [529.9, 1015.4],
      [534.5, 1017.4],
      [539.1, 1019.3],
      [543.8, 1021.1],
      [548.5, 1022.8],
      [553.2, 1024.4],
      [558, 1026],
      [562.8, 1027.4],
      [567.6, 1028.7],
      [572.4, 1030],
      [577.3, 1031.1],
      [582.2, 1032.2],
      [587.1, 1033.1],
      [592, 1034],
      [597, 1034.8],
      [601.9, 1035.4],
      [606.9, 1036],
      [611.9, 1036.4],
      [616.9, 1036.7],
      [621.8, 1036.9],
      [626.8, 1037],
      [631.8, 1037],
      [636.8, 1036.9],
      [641.8, 1036.6],
      [646.8, 1036.2],
      [651.8, 1035.7],
      [656.8, 1035.1],
      [661.7, 1034.3],
      [666.6, 1033.4],
      [671.5, 1032.4],
      [676.4, 1031.3],
      [681.2, 1030],
      [686, 1028.7],
      [690.8, 1027.2],
      [695.5, 1025.4],
      [700.1, 1023.6],
      [703.6, 1020.6],
      [701.3, 1016.2],
      [698.7, 1011.9],
      [696.2, 1007.6],
      [693.6, 1003.3],
      [691, 999],
      [688.5, 994.7],
      [685.9, 990.4],
      [683.4, 986.1],
      [680.8, 981.8],
      [678.3, 977.5],
      [675.7, 973.2],
      [673.2, 968.9],
      [670.6, 964.6],
      [668.1, 960.3],
      [665.5, 956],
      [663, 951.7],
      [660.4, 947.4],
      [657.8, 943.1],
      [655.3, 938.8],
      [652.7, 934.5],
      [650.2, 930.3],
      [647.6, 926],
      [645.1, 921.7],
      [642.5, 917.4],
      [640, 913.1],
      [637.4, 908.8],
      [634.9, 904.5],
      [632.3, 900.2],
      [629.7, 895.9],
      [627.2, 891.6],
      [624.6, 887.3],
      [622.1, 883],
      [619.5, 878.7],
      [617, 874.4],
      [614.4, 870.1],
      [611.9, 865.8],
      [609.3, 861.5],
      [606.8, 857.2],
      [604.2, 852.9],
      [601.7, 848.6],
      [599.2, 844.3],
      [596.6, 839.9],
      [594.1, 835.6],
      [591.6, 831.3],
      [589.3, 826.9],
      [587.1, 822.4],
      [585, 817.8],
      [583, 813.3],
      [581.1, 808.6],
      [579.4, 803.9],
      [577.8, 799.2],
      [576.4, 794.4],
      [575.1, 789.6],
      [573.9, 784.7],
      [572.9, 779.8],
      [572, 774.9],
      [571.2, 769.9],
      [570.6, 765],
      [570.2, 760],
      [570, 755],
      [569.9, 750],
      [570.1, 745],
      [570.4, 740],
      [570.9, 735],
      [571.5, 730.1],
      [572.3, 725.1],
      [573.1, 720.2],
      [574, 715.3],
      [575, 710.4],
      [576.2, 705.5],
      [577.6, 700.7],
      [579.2, 696],
      [581.2, 691.4],
      [583.5, 687],
      [586.2, 682.8],
      [589.4, 678.9],
      [592.9, 675.3],
      [596.7, 672.2],
      [600.9, 669.4],
      [605.3, 667.1],
      [610, 665.2],
      [614.7, 663.7],
      [619.6, 662.6],
      [624.5, 661.8],
      [629.5, 661.3],
      [634.5, 661],
      [639.5, 660.8],
      [644.5, 660.9],
      [649.5, 661.2],
      [654.5, 661.6],
      [659.4, 662.1],
      [664.4, 662.7],
      [669.4, 663.4],
      [674.3, 664.2],
      [679.2, 665],
      [684.2, 665.7],
      [689.1, 666.2],
      [694.1, 665.7],
      [698.8, 664],
      [702.9, 661.2],
      [706.3, 657.5],
      [709.1, 653.4],
      [711.4, 649],
      [713.2, 644.3],
      [714.4, 639.4],
      [715.2, 634.5],
      [715.7, 629.5],
      [715.9, 624.5],
      [715.7, 619.5],
      [715.2, 614.6],
      [714.2, 609.7],
      [713.7, 604.7],
      [714.8, 599.9],
      [717.9, 596],
      [722.1, 593.4],
      [726.1, 590.4],
      [728.2, 585.9],
      [728.5, 580.9],
      [727.5, 576],
      [725.9, 571.3],
      [723.7, 566.9],
      [721, 562.6],
      [720.1, 558.1],
      [723.4, 554.4],
      [726.2, 550.2],
      [727.8, 545.5],
      [727.5, 540.6],
      [725.1, 536.2],
      [721.5, 532.8],
      [718.2, 529.1],
      [716, 524.6],
      [714, 520],
      [717.4, 516.8],
      [721.3, 513.7],
      [724.9, 510.2],
      [727.9, 506.2],
      [730.3, 501.8],
      [732.2, 497.2],
      [733.1, 492.3],
      [732.4, 487.4],
      [730.3, 482.8],
      [727.7, 478.6],
      [724.7, 474.6],
      [721.4, 470.8],
      [718.1, 467.1],
      [714.6, 463.5],
      [711.1, 459.9],
      [707.5, 456.4],
      [703.8, 453.1],
      [700.1, 449.8],
      [696.2, 446.6],
      [692.5, 443.2],
      [689.1, 439.6],
      [687, 435.3],
      [690.2, 431.5],
      [693.4, 427.7],
      [696.2, 423.6],
      [698.9, 419.3],
      [701.3, 414.9],
      [703.4, 410.4],
      [705.3, 405.8]
    ];


    // Create nodes based on star coordinates
    nodes = starCoordinates.map(([x, y], index) => ({
      id: index,
      x: x + 150, // Adjust the center coordinates
      y: y + 150, // Adjust the center coordinates
    }));

    // Create the force simulation
    const simulation = d3.forceSimulation(nodes)
      .force('center', d3.forceCenter(-100, -200)) // Adjust the center as needed
      .force('custom', customForce());

    // Update node positions on each tick
    simulation.on("tick", () => {
      nodes = simulation.nodes();
    });
  });

  function customForce() {
    const strength = 0.5; // Adjust the strength as needed

    function force() {
      nodes.forEach(node => {
        // Calculate the angle from the center of the SVG to the current node
        const angle = Math.atan2(node.y - 150, node.x - 150); // Adjust the center coordinates

        // Calculate the distance from the center of the SVG to the current node
        const distance = Math.sqrt((node.x - 150) ** 2 + (node.y - 150) ** 2); // Adjust the center coordinates

        // Move the node towards the center of the SVG with a force proportional to the distance
        node.x -= strength * distance * Math.cos(angle);
        node.y -= strength * distance * Math.sin(angle);
      });
    }

    force.initialize = (_) => nodes;
    return force;
  }

</script>

<style>
  .intro-container {
    display: flex;
    width: 100vw;
    height: 100vh;
    flex-direction: row;
    background-color: #000000;
    margin: auto;
    padding: 0%;
  }

  svg {
    width: 50vw;
    height: 100vh;
  }
</style>

<div class="intro-container">
  <svg>
    {#each nodes as node}
      <circle
      cx={node.x}
      cy={node.y}
      r={5}
      fill="#ffffff"/>
    {/each}
  </svg>
</div>
